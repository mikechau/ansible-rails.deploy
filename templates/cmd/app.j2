#!/usr/bin/env ruby

# AUTOGENERATED BY ANSIBLE

require 'rubygems'

ACTION_CHOICES = ['start', 'stop']

COMMAND = ARGV[0]

def start
  exec 'bundle exec passenger start {{ rails_app_passenger_start_flags }}'
end

def stop
  exec 'bundle exec passenger stop -p {{ rails_app_port }} --pid-file {{ rails_app_pid_file }}'
end

def status
  exec 'bundle exec passenger-status'
end

def xml
  exec 'bundle exec passenger-status --show=xml | bundle exec gorgeous -T json'
end

def no_action
  STDERR.puts "#{COMMAND || 'blank'} is a invalid argument.\nTry: #{ACTION_CHOICES}."
  exit 1
end

def execute
  case COMMAND
  when 'start'
    start
  when 'stop'
    stop
  when 'status'
    status
  else
    no_action
  end
end

execute